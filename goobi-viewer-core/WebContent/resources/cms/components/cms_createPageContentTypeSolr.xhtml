<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://xmlns.jcp.org/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core" 
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"> 

	<composite:interface />

    <composite:implementation>
        <h:panelGroup rendered="#{contentItem.type == 'SOLRQUERY'}">
            <!-- SOLR INPUT -->
            <div class="cms-module__option-group">
                <div class="cms-module__option-label">
                    <label for="solrQueryInput">#{msg.cms_itemSolrQuery}#{contentItem.mandatory ? '*' : ''}:</label>
                </div>
                <div class="cms-module__option-control">
                    <h:panelGroup id="solrQueryInputGroup">
                        <div class="cms-module__option-message">
                            <h:messages for="solrQueryInput" infoClass="cms-module__option-message success" warnClass="cms-module__option-message warning" errorClass="cms-module__option-message danger" />
                        </div>
                        <h:inputText id="solrQueryInput" value="#{contentItem.solrQuery}" styleClass="form-control">
                            <f:validator validatorId="solrQueryValidator" for="solrQueryInput" />
                            <f:ajax event="blur" render="solrQueryInputGroup" />
                        </h:inputText>
                    </h:panelGroup>
                    <span class="cms-module__option-control-helptext">#{msg.inline_help__input_solr_query}</span>
                </div>
                <div class="cms-module__option-help">
                    <button type="button" class="btn btn--clean" data-toggle="helptext">
                        <i class="fa fa-question-circle" aria-hidden="true"></i>
                    </button>
                </div>
            </div>

            <!-- SOLR SORT FIELDS -->
            <div class="cms-module__option-group">
                <div class="cms-module__option-label">
                    <label for="solrSortFields">#{msg.cms_itemSolrSortFields}:</label>
                </div>
                <div class="cms-module__option-control">
                    <div class="custom-control custom-control--select">
                        <h:selectOneMenu id="solrSortFields" styleClass="form-control" value="#{contentItem.solrSortFields}">
                            <f:selectItem itemValue="" itemLabel="#{msg.select}" />
                            <c:forEach var="field" items="#{cmsBean.possibleSortFields}">
                                <f:selectItem itemValue="#{field}" itemLabel="#{msg[field]} (#{msg.searchSortingDropdown_ascending})" />
                                <f:selectItem itemValue="!#{field}" itemLabel="#{msg[field]} (#{msg.searchSortingDropdown_descending})" />
                            </c:forEach>
                            <f:ajax event="change" render="@this" />
                        </h:selectOneMenu>
                    </div>
                    <span class="cms-module__option-control-helptext">#{msg.inline_help__solr_sort_fields}</span>
                </div>
                <div class="cms-module__option-help">
                    <button type="button" class="btn btn--clean" data-toggle="helptext">
                        <i class="fa fa-question-circle" aria-hidden="true"></i>
                    </button>
                </div>
            </div>

            <!-- ITEM COUNT -->
            <div class="cms-module__option-group">
                <div class="cms-module__option-label">
                    <label for="itemCount">#{msg.cms_itemCount}:</label>
                </div>
                <div class="cms-module__option-control">
                    <h:inputText id="itemCount" styleClass="form-control" value="#{contentItem.elementsPerPage}">
                        <f:ajax event="change" render="@this" />
                    </h:inputText>
                    <span class="cms-module__option-control-helptext">#{msg.inline_help__solr_item_count}</span>
                </div>
                <div class="cms-module__option-help">
                    <button type="button" class="btn btn--clean" data-toggle="helptext">
                        <i class="fa fa-question-circle" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </h:panelGroup>
    </composite:implementation>
</ui:composition>
