<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
    xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
    template="/resources/themes/#{navigationHelper.theme}/templateAdmin.html">

    <ui:define name="metadata">
        <f:metadata>
            <f:event
                type="preRenderView"
                listener="#{navigationHelper.setCurrentPageAdmin('adminCmsCollections')}" />
            <f:event
                type="preRenderView"
                listener="#{navigationHelper.addStaticLinkToBreadcrumb(msg.cms_collection_edit,2)}" />
            <f:event
                type="preRenderView"
                listener="#{adminBean.resetCurrentLicenseAction}" />
            <f:event
                type="preRenderView"
                listener="#{cmsBean.init()}" />
        </f:metadata>
    </ui:define>

    <ui:define name="breadcrumbs">
        <ui:include src="/resources/includes/breadcrumbs.xhtml" />
    </ui:define>

    <ui:define name="content">
        <h:panelGroup
            id="cmsCollectionsAccessControl"
            rendered="#{configurationBean.cmsEnabled}">
            <div id="cmsEditCollection">
                <h:panelGroup rendered="#{userBean.admin}">
                    <div class="cms-collections">
                        <h2>#{cmsCollectionsBean.currentCollection.solrFieldValue}</h2>

                        <h:form
                            id="cmsEditCollectionForm"
                            prependId="false">

                            <div class="edit_collection_table">
                                <div id="editLabel" class="edit_collection_row">
                                    <div class="edit_collection_label">
                                        <label>#{msg.cms_collections_label}</label>
                                    </div>
                                    <div class="edit_language_table">
                                        <ui:repeat value="#{navigationHelper.supportedLanguages}" var="language">
                                            <div class="edit_language_column">
                                                <div id="edit_language_label">
                                                    <label>#{language}</label>
                                                </div>
                                                <div id="edit_language_value">
                                                    <h:inputTextarea value="#{cmsCollectionsBean.getCurrentLabel(language).value}">
                                                    </h:inputTextarea>
                                                </div>
                                            </div>
                                        </ui:repeat>
                                    </div>
                                </div>
                            </div>
                                <div class="cms-edit-collection__save">
                                    <h:commandButton
                                        styleClass="btn"
                                        id="saveCollection"
                                        value="#{msg.save}"
                                        action="#{cmsCollectionsBean.saveCurrentCollection()}">
<!--                                         <f:ajax render="@none" execute="@form"></f:ajax>  -->
                                     </h:commandButton>
                                </div>
                        </h:form>
                    </div>
                </h:panelGroup>
            </div>
        </h:panelGroup>
    </ui:define>

    <ui:define name="sidebar">
        <widgetComponent:widget_admin />
        <widgetComponent:widget_cms />
        <widgetComponent:widget_user />
    </ui:define>
</ui:composition>
