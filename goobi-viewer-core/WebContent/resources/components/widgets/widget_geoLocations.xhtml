<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

	<!-- INTERFACE OPTIONS -->
    <composite:interface>
    	<composite:attribute name="widget" type="de.intranda.digiverso.presentation.model.cms.CMSSidebarElement" required="true" />
    </composite:interface>
    
    <!-- COMPONENT CONTENT -->
    <composite:implementation>
    	<!-- MAPBOX RESOURCES -->
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.css' rel='stylesheet' />
    	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.js'></script>

		<!-- WIDGET GEO LOCATIONS -->
		<h:panelGroup rendered="#{cc.attrs.widget.type == 'widgetGeoLocations' or cc.attrs.widget == null}">
		    <div id="widgetGeoLocations" class="widget widget-geo-locations #{cc.attrs.widget.cssClass}">		
				<h3>
					<h:outputText value="#{msg.widgetGeoLocations}" escape="false" />
				</h3>
				
				<!-- MAP -->
				<div id="widgetGeoLocationsMap" class="widget-geo-locations__map"></div>
			</div>
	        
	        <script type="text/javascript">
	        	widgetGeoLocationsConfig = {
        			locations: '#{cc.attrs.widget.geoLocationsString}'
				};
	        	
	        	cmsJS.geoLocations.init( widgetGeoLocationsConfig );
	        </script>
        </h:panelGroup>
    </composite:implementation>
</ui:composition>
