<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
    xmlns:composite="http://xmlns.jcp.org/jsf/composite">
    
    <composite:interface />

	<composite:implementation>
		<h:panelGroup rendered="#{configurationBean.bookshelvesEnabled and userBean.loggedIn}">
			<div id="widgetBookshelfList" class="widget widget-bookshelf-list">
				<h:form id="widgetBookshelfListForm">
					<h3>#{msg.bookshelf_bookshelf}</h3>

					<h:panelGroup rendered="#{bookshelfBean.getBookshelvesForUser(userBean.user).isEmpty()}">
						<div class="alert alert-warning" role="alert">#{msg.bookshelves_noBookshelvesWarning}</div>
					</h:panelGroup>

					<h:panelGroup rendered="#{!bookshelfBean.getBookshelvesForUser(userBean.user).isEmpty()}">
						<ul>
							<ui:repeat value="#{bookshelfBean.getBookshelvesForUser(userBean.user)}" var="bookshelf" varStatus="status">
								<li>
									<div class="row no-margin">
										<div class="col-xs-8 no-padding">
											<a href="#{request.contextPath}/bookshelf/#{bookshelf.id}/">
												#{bookshelf.name}
											</a>
										</div>
										<div class="col-xs-4 no-padding text-right">
											<h:commandLink action="#{bookshelfBean.editBookshelfAction(bookshelf)}">
												<i class="fa fa-pencil" aria-hidden="true"></i>
											</h:commandLink>
										</div>
									</div>
								</li>
							</ui:repeat>
						</ul>
					</h:panelGroup>
					
					<!-- BACK -->
					<div class="widget-bookshelf-list__back">
						<a href="#{navigationHelper.applicationUrl}mybookshelves/">#{msg.bookshelf_myBookshelves}</a>
					</div>
				</h:form>
			</div>
		</h:panelGroup>
	</composite:implementation>
</ui:composition>