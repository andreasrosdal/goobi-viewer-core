<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:viewer="http://xmlns.jcp.org/jsf/composite/components/partner"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
	template="/resources/themes/#{navigationHelper.theme}/template.html">

	<composite:interface>
		<composite:attribute name="component" required="true" />
	</composite:interface>
    
	<composite:implementation>
		<div id="templateFaq"
			class="tpl-faq content-component__legacy-full-width">

			<!-- FAQ DESCRIPTION -->
			<ui:fragment
				rendered="#{cc.attrs.component.hasContent('description')}">
				<div class="tpl-faq__description">
					<h:outputText escape="false"
						value="#{cc.attrs.component.getContentData('description')}"></h:outputText>
				</div>
			</ui:fragment>

			<!-- FAQ LIST -->
			<div>
				<ui:fragment
					rendered="#{!cmsPage.getProperty('DISPLAY_CHILD_TAGS_AS_HEADERS').booleanValue}">
					<div class="accordion tpl-faq__list" id="faqAccordion"
						role="tablist" aria-multiselectable="true">
						<!-- FAQ ITEMS -->
						<c:forEach var="faqItem"
							items="#{cc.attrs.component.getContentItem('faqList').content.nestedPages}"
							varStatus="status">
							<div class="card" id="card-#{faqItem.id}">
								<div class="card-header" role="tab" id="heading-#{faqItem.id}">
									<h2 class="card-title">
										<a href="#collapse-#{faqItem.id}" role="button"
											class="#{status.count eq 1 ? '' : 'collapsed'}"
											data-toggle="collapse"
											aria-expanded="#{status.count eq 1 ? 'true' : 'false'}"
											aria-controls="collapse-#{faqItem.id}">
											#{faqItem.title}
										</a> <a class="fa fa-link card-header__fragment-link"
											href="#card-#{faqItem.id}"
											data-collapse-show="#collapse-#{faqItem.id}"
											aria-label="#{msg.aria__label_faq_direct_link}"> </a>
									</h2>
								</div>
								<div role="region" id="collapse-#{faqItem.id}"
									class="card-collapse collapse #{status.count eq 1 ? 'in' : ''}"
									data-parent="#faqAccordion"
									aria-expanded="#{status.count eq 1 ? 'true' : 'false'}"
									aria-labelledby="heading-#{faqItem.id}">
									<div class="card-body">
										<div class="tpl-faq-single__content">

											<ui:fragment rendered="#{faqItem.hasContent('text')}">
												<div class="tpl-faq-single__text">
													<h:outputText escape="false"
														value="#{faqItem.getContent('text')}"></h:outputText>
												</div>
											</ui:fragment>
											<!-- IMAGE -->
											<ui:fragment rendered="#{faqItem.hasContent('image')}">
												<div class="tpl-faq-single__image">
													<figure class="tpl-faq-single__image">
														<img title="#{faqItem.getMediaName('image')}"
															src="#{faqItem.getContent('image')}"
															class="img-responsive"
															alt="#{faqItem.getMediaName('image')}" />
														<figcaption>
															#{faqItem.getMediaDescription('image')}</figcaption>
													</figure>
												</div>
											</ui:fragment>
											<ui:fragment rendered="#{faqItem.hasContent('text2')}">
												<div class="tpl-faq-single__text">
													<h:outputText escape="false"
														value="#{faqItem.getContent('text2')}"></h:outputText>
												</div>
											</ui:fragment>
										</div>
									</div>
								</div>
							</div>
						</c:forEach>
					</div>
				</ui:fragment>

				<ui:fragment
					rendered="#{cmsPage.getProperty('DISPLAY_CHILD_TAGS_AS_HEADERS').booleanValue}">
					<!-- CLASSIFICATIONS -->
					<c:forEach var="category"
						items="#{cc.attrs.component.getContentItem('faqList').content.sortedCategories}"
						varStatus="classification_status">
						<h1 class="tpl-faq__subheader">#{msg[category]}</h1>
						<div class="accordion tpl-faq__list" id="faqAccordion"
							role="tablist" aria-multiselectable="true">

							<!-- FAQ ITEMS -->
							<c:forEach var="faqItem"
								items="#{cc.attrs.component.getContentItem('faqList').content.getNestedPages(category)}"
								varStatus="status">
								<div class="card" id="card-#{faqItem.id}-#{category.id}">
									<div class="card-header" role="tab"
										id="heading-#{faqItem.id}-#{category.id}">
										<h2 class="card-title">
											<a href="#collapse-#{faqItem.id}-#{category.id}"
												role="button"
												class="#{(classification_status.count eq 1) and (status.count eq 1) ? '' : 'collapsed'}"
												data-toggle="collapse"
												aria-expanded="#{(classification_status.count eq 1) and (status.count eq 1) ? 'true' : 'false'}"
												aria-controls="collapseOne"> <!-- 	            <i class="fa fa-chevron-down" aria-hidden="true"></i>
	                                                    <i class="fa fa-chevron-up" aria-hidden="true"></i> -->
												#{faqItem.title}
											</a> <a class="fa fa-link card-header__fragment-link"
												href="#card-#{faqItem.id}-#{category.id}"
												data-collapse-show="#collapse-#{faqItem.id}-#{category.id}">
											</a>
										</h2>
									</div>
									<div role="region" id="collapse-#{faqItem.id}-#{category.id}"
										class="card-collapse collapse #{(classification_status.count eq 1) and (status.count eq 1) ? 'in' : ''}"
										data-parent="#faqAccordion"
										aria-expanded="#{(classification_status.count eq 1) and (status.count eq 1) ? 'true' : 'false'}"
										aria-labelledby="heading-#{faqItem.id}-#{category.id}">
										<div class="card-body">
											<div class="tpl-faq-single__content">

												<ui:fragment rendered="#{faqItem.hasContent('text')}">
													<div class="tpl-faq-single__text">
														<h:outputText escape="false"
															value="#{faqItem.getContent('text')}"></h:outputText>
													</div>
												</ui:fragment>
												<!-- IMAGE -->
												<ui:fragment rendered="#{faqItem.hasContent('image')}">
													<div class="tpl-faq-single__image">
														<figure class="tpl-faq-single__image">
															<img title="#{faqItem.getMediaName('image')}"
																src="#{faqItem.getContent('image')}"
																class="img-responsive"
																alt="#{faqItem.getMediaName('image')}" />
															<figcaption>
																#{faqItem.getMediaDescription('image')}</figcaption>
														</figure>
													</div>
												</ui:fragment>
												<ui:fragment rendered="#{faqItem.hasContent('text2')}">
													<div class="tpl-faq-single__text">
														<h:outputText escape="false"
															value="#{faqItem.getContent('text2')}"></h:outputText>
													</div>
												</ui:fragment>
											</div>
										</div>
									</div>
								</div>
							</c:forEach>
						</div>
					</c:forEach>
				</ui:fragment>
			</div>
		</div>
	</composite:implementation>
</ui:composition>