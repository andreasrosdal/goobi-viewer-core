<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://xmlns.jcp.org/jsf/html" 
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
    xmlns:adminWidget="http://xmlns.jcp.org/jsf/composite/admin/widgets" 
    template="/resources/themes/#{navigationHelper.theme}/templateAdmin.html">

    <ui:define name="metadata">
        <f:metadata>
            <f:event type="preRenderView" listener="#{navigationHelper.setCurrentPageAdmin('adminCmsGeoMaps')}" />
        </f:metadata>
    </ui:define>

    <!-- CONTENT -->
    <ui:define name="content">
        <ui:fragment id="cmsGeoMaps" rendered="#{configurationBean.cmsEnabled and userBean.user.isHasCmsPrivilege('CMS_GEOMAPS')}">
            <div id="cmsGeoMaps">
                <h2 class="admin__content-inner-title">#{msg.cms__geo_maps__title}
                </h2>

                <div class="admin__content-inner-content">
                    <h:form id="geoMapEditForm" prependId="false">
                        <h3>#{msg.cms__geo_maps__metadata__title}</h3>
                        <h:panelGroup id="metadataPanel" >
                        	<ul class="nav nav-tabs" role="tablist">
                        		<ui:repeat value="#{navigationHelper.supportedLanguages}" var="language" varStatus="status">
                                    <li role="presentation" class="#{language == geoMapBean.selectedLanguage ? 'active' : ''}">
                                    <a href="#nameLanguage-#{status.index}" aria-controls="nameLanguage-#{status.index}" role="tab" data-toggle="tab">#{language}</a>
<!--                                         <h:commandLink action="#{geoMapBean.setSelectedLanguage(language)}" value="#{language}"> -->
<!--                                         	<f:ajax execute="@form" render="@form"/> -->
<!--                                         </h:commandLink> -->
                                    </li>
                                </ui:repeat>
                        	</ul>
                        	<div class="tab-content">
                        	<ui:repeat value="#{navigationHelper.supportedLanguages}" var="language" varStatus="status">
                                <div role="tabpanel" class="tab-pane #{status.index == 0 ? 'active' : ''}" id="nameLanguage-#{status.index}">
                        	
	                        	<div class="admin__content-inner-content__input_form">
									<!-- TITLE -->
			                        <div class="input_form__option_group">
			                            <div class="input_form__option_label">
			                                <label for="mapTitle">#{msg.name}:</label>
			                            </div>
			                            <div class="input_form__option_marker in">
			                            <label>*</label>
			                            </div>
			                            <div class="input_form__option_control">
			                                <h:inputText id="mapTitle" styleClass="form-control"
			                                    value="#{geoMapBean.currentMap.getTitle(language).value}" required="true" requiredMessage="#{msg.error__title_required}"/>
			                            </div>
			                            <div class="input_form__option_help">
			                                <button type="button" class="btn btn--clean" data-toggle="helptext" for="titleHelp">
			                                    <i class="fa fa-question-circle" aria-hidden="true"></i>
			                                </button>
			                            </div>
			                            <div id="titleHelp" class="input_form__option_control_helptext">#{msg.cms__geo_maps__metadata_title__help}</div>
			                        </div>
			                        
			                        <!-- DESCRIPTION -->
			                        <div class="input_form__option_group">
			                            <div class="input_form__option_label">
			                                <label for="mapDescription">#{msg.description}:</label>
			                            </div>
			                            <div class="input_form__option_marker">
			                            <label>*</label>
			                            </div>
			                            <div class="input_form__option_control">
			                                <h:inputTextarea id="mapDesc" styleClass="form-control"
			                                    value="#{geoMapBean.currentMap.getDescription(language).value}"/>
			                            </div>
			                            <div class="input_form__option_help">
			                                <button type="button" class="btn btn--clean" data-toggle="helptext" for="descHelp">
			                                    <i class="fa fa-question-circle" aria-hidden="true"></i>
			                                </button>
			                            </div>
			                            <div id="descHelp" class="input_form__option_control_helptext">#{msg.cms__geo_maps__metadata_description__help}</div>
			                        </div>
								</div>
								</div>
								</ui:repeat>
                            </div>
                       </h:panelGroup>
                    </h:form>
                </div>
            </div>
        </ui:fragment>
    </ui:define>

    <!-- SIDEBAR -->
    <ui:define name="sidebar">
        <adminWidget:widget_admin />
        <adminWidget:widget_crowdsourcing />
        <adminWidget:widget_cms />
    </ui:define>
</ui:composition>
