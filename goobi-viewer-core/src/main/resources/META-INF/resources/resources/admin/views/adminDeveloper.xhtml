<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:cmsComponent="http://xmlns.jcp.org/jsf/composite/cms/components"
	xmlns:formComponent="http://xmlns.jcp.org/jsf/composite/components/forms"
	xmlns:adminWidget="http://xmlns.jcp.org/jsf/composite/admin/widgets"
	template="/resources/themes/#{navigationHelper.theme}/templateAdmin.html">

	<ui:define name="metadata">
		<f:metadata>
            <f:event type="preRenderView" listener="#{navigationHelper.setCurrentPageAdmin('adminDeveloper')}" />
		</f:metadata>
	</ui:define>

	<ui:define name="content">

		<!-- TITLE -->
		<div class="admin__title-bar">
			<h1 class="admin__title">#{msg.admin__developer__title}</h1>
		</div>
		
		<viewerComponent:adminBreadcrumbs />

		<!-- DOUBLE CHECK ADMIN ACCESS -->
		<ui:fragment rendered="#{userBean.admin}">
			<div id="adminDeveloper" class="admin__content-inner-content">
			
				<div class="admin__info-text">

				#{msg.admin__developer__general_info_text}
				
				</div>
			
			<div class="admin__developer-autopull-wrapper">
				<div class="admin__developer-autopull-status-wrapper">
					<div class="admin__developer-autopull-status-text">Autopull Status: OFF</div><div class="admin__developer-autopull-status-icon -isOff"></div>

				</div>
				<div class="admin__developer-autopull-last-pull">17.11.2023 00:00</div>
				<div class="admin__developer-autopull-branch-name">develop</div>
			</div>

			
				<h2>#{msg.admin__developer__download_files}</h2>
				<div class="admin__default-block">

					 	<h:outputText layout="block" styleClass="admin__developer-download-info-text" escape="false" value="#{msg.admin__developer__files_info}" />
						

					<div class="admin__developer-download-wrapper">
						<a class="btn btn--full admin__developer-download-button"><i class="fa fa-download" aria-hidden="true"></i><span>Herunterladen</span></a>
					</div>
					
					<div class="admin__developer-sql-info-text">
						#{msg.admin__developer__unzip_file}
					</div>
					<div class="admin__developer-code-block">
						
						<div class="admin__developer-copy-to-clipboard" title="copy to clipboard" data-copy-value="#{msg.admin__developer__unzip_file_code}"><i class="fa fa-clipboard" aria-hidden="true"></i></div>
						<code data-target="sqlCode"><h:outputFormat value="#{msg.admin__developer__unzip_file_code}" escape="false">
	                        	<f:param value="#{navigationHelper.theme}" />
	                        </h:outputFormat></code>

					</div>

				</div>
				
<!-- 				<div class="admin__developer-arrow-line"> -->
<!-- 					<i class="fa fa-caret-down" aria-hidden="true"></i> -->
<!-- 				</div> -->

				<h2>#{msg.admin__developer__create_database_heading}</h2>
				<div class="admin__default-block">
					<div class="admin__developer-sql-info-text">
						<h:outputFormat value="#{msg.admin__developer__create_database_text}:" escape="false">
	                    	<f:param value="#{navigationHelper.theme}" />
	                    </h:outputFormat>
					</div>
					<div class="admin__developer-code-block">
						
						<div class="admin__developer-copy-to-clipboard" title="copy to clipboard" 
						
						
						data-copy-value="#{navigationHelper.getTranslationWithParamsUnescaped(msg.admin__developer__sql_commands, navigationHelper.theme)}"><i class="fa fa-clipboard" aria-hidden="true"></i></div>
						<code data-target="code"><h:outputFormat value="#{msg.admin__developer__sql_commands}" escape="false">
	                        	<f:param value="#{navigationHelper.theme}" />
	                        </h:outputFormat></code>

					</div>
				</div>

				
				<h2>Messages und Dateien lokal ablegen</h2>
				<div class="admin__default-block">
					<div class="admin__developer-sql-info-text">
					 	Die messages Dateien und die config_viewer.xml in den lokalen config Ordner kopieren 					
					 </div>
					<p class="admin__developer-code-block">
						Pfad 1<br />
						Pfad 2
					</p>
				</div> 
				
				<h2>Einstellungen  allg. Informationen</h2>
				<div class="admin__default-block">
					<div class="admin__developer-sql-info-text">
					 	Die messages Dateien und die config_viewer.xml in den lokalen config Ordner kopieren 					
					 </div>
					<p class="admin__developer-code-block">
						Pfad 1<br />
						Pfad 2
					</p>
				</div>


			</div>
			
			<script>


				//<![CDATA[
					
				// CLEAN CODE FOR COPY TO CLIPBOARD - REMOVE BR ELEMENTS
// 				$('[data-target="code"]').each(function(i, obj) {
// 					rawHtml = $(thisCopyButton).next('[data-target="sqlCode"]').clone().find('br').prepend('\r\n').end().text();
					
// 					$(this).prev('[data-copy-value]').data('copy-value', cleanCode);
// 				});
				
				$('[data-copy-value]').each(function(i, obj) {
					var originalCode = $(this).data('copy-value');
					var cleanCode = originalCode.replace(/<br ?\/?>/g, "\n");
					$(this).data('copy-value', cleanCode);
					console.log(cleanCode); 
				});

			    //]]>
				
			</script>
			


			
		</ui:fragment>
	</ui:define>
</ui:composition>