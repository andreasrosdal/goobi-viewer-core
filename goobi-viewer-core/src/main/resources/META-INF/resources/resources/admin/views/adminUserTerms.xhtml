<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
	xmlns:adminWidget="http://xmlns.jcp.org/jsf/composite/admin/widgets"
	template="/resources/themes/#{navigationHelper.theme}/templateAdmin.html">

	<ui:define name="content">
		<f:view contentType="text/html" encoding="utf-8">

			<h:panelGroup layout="block" id="adminUserTerms" rendered="#{userBean.admin}">
				<!-- TITLE -->
				<div class="admin__title-bar">
					<h2 class="admin__title">#{msg.admin__terms_of_use__title}</h2>
				</div>

				<div class="admin__content-inner-content">
					<div class="admin__info-text">
						<h:outputText value="#{msg.admin__terms_of_use__description}" escape="false" />
					</div>

					<h:form id="editUserTerms" styleClass="form-horizontal form-group" role="form" prependId="false">

						<!-- TERMS OF USE ACTIVATION INFO + BUTTON -->
						<h:panelGroup id="adminUserTermsActivation" layout="block">
						<ui:fragment rendered="#{!termsOfUseBean.active}">

						
							<div class="mb-2">
								<p>
									<b>#{msg.admin__terms_of_use__deactivated}</b>
								</p>
							</div>
							
							<h:commandButton
								styleClass="btn btn--success admin__user-terms-activate-button"
								value="#{msg.action__activate}"
								action="#{termsOfUseBean.setActive(true)}"></h:commandButton>


						</ui:fragment>
						</h:panelGroup>
						

			<div class="admin__user-terms-box-editable">
						<!-- RENDERED IF TERMS OF USE FUNCTION IS ACTIVE -->
						<!-- <ui:fragment rendered="#{termsOfUseBean.active}">-->
							<!-- EDIT TERMS OF USE TITLE -->
							<h3>#{msg.admin__terms_of_use__manage_text}</h3>

							<!-- TERMS OF USE LANGUAGE TABS -->
							<div class="admin__user-terms-language-tabs">
								<!-- NAV TABS -->
								<ul class="nav nav-tabs" role="tablist">
									<c:forEach var="locale"
										items="#{termsOfUseBean.getAllLocales()}">
										<li role="presentation"
											class="admin__user-terms-language-tab #{termsOfUseBean.selectedLanguage == locale.language ? 'active':''}">
											<h:commandLink value="#{locale.getDisplayLanguage(navigationHelper.locale)}"
												action="#{termsOfUseBean.setSelectedLanguage(locale.language)}"
												immediate="false">
												<f:ajax render="@form" execute="@form"></f:ajax>
											</h:commandLink>
										</li>
									</c:forEach>
								
									<!-- DEMONSTRATION PURPOSE - TO DELETE -->
										<li role="presentation"
											class="admin__user-terms-language-tab -alreadyTranslated #{termsOfUseBean.selectedLanguage == locale.language ? 'active':''}">
											<h:commandLink value="XY"
												action="#{termsOfUseBean.setSelectedLanguage(locale.language)}"
												immediate="false">
												<f:ajax render="@form" execute="@form"></f:ajax>
											</h:commandLink>
										</li>		
									
								</ul>
							</div>

							<div class="admin__default-block">
								<div class="tab-content">
									<!-- LOCALIZE TABS -->
									<h:panelGroup
										rendered="#{termsOfUseBean.selectedLanguage != null}">
										<ui:param name="language"
											value="#{termsOfUseBean.selectedLanguage}" />
										<div class="form-group form-row">
											<div class="col-2 control-label admin__form-label">
												<label for="userTermsTitle">#{msg.title}:</label>
											</div>
											<div class="col-10 admin__form-input">
												<h:inputText id="userTermsTitle" styleClass="form-control"
													value="#{termsOfUseBean.title}" />
												<!-- <span class="admin__form-help-text">#{msg.admin__user_display_name__help}</span>  -->
											</div>
										</div>

										<!-- EDIT TERMS OF USE TEXT -->
										<div class="form-group form-row">
											<div class="col-2 control-label admin__form-label">
												<label for="userTermsText">#{msg.text}:</label>
											</div>
											<div class="col-10 admin__form-input">
												<h:inputTextarea id="userTermsText"
													styleClass="form-control tinyMCE"
													value="#{termsOfUseBean.description}" />
												<!-- <span class="admin__form-help-text">#{msg.admin__user_display_name__help}</span>  -->
											</div>
										</div>
									</h:panelGroup>
								</div>
							</div>

							<!-- SAVE TERMS OF USE TEXT -->
							<div class="row no-gutters justify-content-end admin__final-actions">
								<h:commandButton class="btn btn--success" value="#{msg.save}"
									action="#{termsOfUseBean.save()}">
									<f:ajax render="@form :messages" execute="@form"></f:ajax>
								</h:commandButton>
							</div>
							
							</div>

							<!-- DEACTIVATE TERMS OF USE + RESET STATUS ACCEPTED FOR USERS -->
							<h3>#{msg.admin__terms_of_use__manage_functionality}</h3>
							<div class="admin__default-block">
							
						<div class="row">
							<div class="col-6">
							<p>#{msg.admin__terms_of_use__deactivate__description}</p>
								
									<h:commandButton class="btn btn--default"
										value="#{msg.action__deactivate}"
										action="#{termsOfUseBean.setActive(false)}">
									</h:commandButton>
															
								<h:commandButton
								styleClass="btn btn--success admin__user-terms-activate-button"
								value="#{msg.action__activate}"
								action="#{termsOfUseBean.setActive(true)}"></h:commandButton>
																
															
							<div class="admin__radio-switch userTermsToggle">
                               <h:selectOneRadio group="activateUserTerms" value="#{termsOfUseBean.active}">
                                   <f:selectItem itemValue="#{false}" itemLabel="#{msg.no}" />
                               </h:selectOneRadio>                                                        
                               <h:selectOneRadio group="activateUserTerms" value="#{termsOfUseBean.active}">
                               
                                   <f:selectItem itemValue="#{true}" itemLabel="#{msg.yes}" />
                               </h:selectOneRadio>
                               <span class="toggle-outside"><span class="toggle-inside"></span></span>
                           </div>	
									
							</div>
							<div class="col-6 text-right">
							


								<p>#{msg.admin__terms_of_use__reset__description}</p>
									<h:commandButton class="btn btn--danger" value="#{msg.reset}"
									    onclick="if ( !confirm( &quot;#{msg.admin__terms_of_use__reset__confirm}&quot; ) ) { return false };"
										action="#{termsOfUseBean.resetUserAcceptance()}">
										<f:ajax render="@form :messages"></f:ajax>
									</h:commandButton>
							</div>
						</div>

							</div>
					<!-- </ui:fragment>-->
					</h:form>
				</div>
			</h:panelGroup>
		</f:view>
	</ui:define>
</ui:composition>
