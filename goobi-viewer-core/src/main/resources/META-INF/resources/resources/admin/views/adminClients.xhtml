<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"

    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
    xmlns:cmsComponent="http://xmlns.jcp.org/jsf/composite/cms/components"
    xmlns:adminWidget="http://xmlns.jcp.org/jsf/composite/admin/widgets"
    template="/resources/themes/#{navigationHelper.theme}/templateAdmin.html">

    <ui:define name="metadata">
        <f:metadata>
            <f:event type="preRenderView" listener="#{navigationHelper.setCurrentPageAdmin('adminClients')}" />
        </f:metadata>
    </ui:define>

    <ui:define name="content">

      <!-- TITLE -->
      <div class="admin__title-bar">
        <h1 class="admin__title">#{msg.admin__clients__title}</h1>
      </div>

      <div id="adminClients" class="admin__content-inner-content">

        <div class="admin__info-text">#{msg.admin__clients__info}</div>

		<c:set scope="view" value="#{adminClientsBean.notConfiguredClients}" var="notConfiguredClients"></c:set>

			<!-- NOT CONFIGURED CLIENTS -->
            <ui:fragment rendered="#{not empty notConfiguredClients}">
                <div class="admin__default-block mb-5">
                    <div class="row">
                      <h2 class="col-12">
                          #{msg.admin__clients__not_configured_clients}
                      </h2>
                    </div>
                    <ui:repeat var="client" value="#{notConfiguredClients}">
	                    <a href="#{request.contextPath}/admin/clients/#{client.id}/"
	                        class="row admin__license-unconfigured-entry">
	                            <div class="col-10 -textlink">
									#{client.clientIdentifier} (IP: #{client.clientIp})
	                            </div>
	                            <div class="col-2 d-flex justify-content-end">
	                            	<span>#{msg.admin__clients__configure_client}</span>
	                            </div>
	                 	</a>
                 	</ui:repeat>
                </div>
            </ui:fragment>

            <!-- CONFIGURED CLIENTS -->
			<div class="admin__content-inner-content">
                   <div class="admin__table-tools">
                       <!-- PAGINATOR -->
                       <div class="admin__table-paginator">
                           <viewerComponent:dataTablePaginator tableValues="#{adminClientsBean.configuredClientsModel}" />
                       </div>
                       <!-- FILTER -->
                       <div class="admin__table-filter">
                           <viewerComponent:dataTableColumnFilter key="admin__clients__search" filter="#{adminClientsBean.configuredClientsModel.getFilter('name_ip_identifier')}"/>
                       </div>
                   </div>

                   <div id="new-table-clients" class="admin__table-content" role="grid" aria-label="#{msg.admin__clients__title}: #{msg.aria_label__table__actions}">
                       <div class="row no-gutters admin__table-title" role="row">
                           <div class="col-6 d-flex -sorting-arrow-trigger">
                               <viewerComponent:sortingArrow filterType="name" colHeading="#{msg.admin__clients__column_information}" list="#{adminClientsBean.configuredClientsModel}" />
                           </div>
                           
                           <div class="col-2 d-flex -sorting-arrow-trigger">
							<viewerComponent:sortingArrow filterType="ip" colHeading="#{msg.admin__clients__column_ip}" list="#{adminClientsBean.configuredClientsModel}" />
                           </div>
                           
                           <div class="col-2 d-flex" role="columnheader">#{msg.admin__clients__date_registered}</div>
                           
                           <div class="col-2 d-flex" role="columnheader">#{msg.admin__clients__date_last_access}</div>
                       </div>


                       <ui:repeat var="client" value="#{adminClientsBean.configuredClientsModel.paginatorList}">
                           <div class="row no-gutters admin__table-entry" role="row">
                               <div class="col-6 d-flex">
                                   <div class="admin__table-data" role="gridcell">
                                       <!-- CLIENT NAME -->
                                       <span class="admin__table-name">#{client.name}</span>
                                       <!-- CLIENT ID -->
                                       <span class="admin__table-name">#{msg.admin__clients__client_identifier }#{client.clientIdentifier}</span>
                                       <!-- EDIT -->
                                       <a href="#{navigationHelper.applicationUrl}admin/clients/#{client.id}/" class="admin__table-action-link" aria-label="#{msg.edit}: #{client.name}">
                                          #{msg.edit}
                                       </a>
                                   </div>
                               </div>

							<div class="col-2 d-flex align-items-center" role="gridcell">
                                   <span class="admin__table-ip-address">
                                       #{client.clientIp}
                                   </span>
                               </div>

							<!-- REGISTERED DATE -->
                               <div class="col-2 d-flex align-items-center" role="gridcell">
                                   <span class="admin__table-last-login">
                                       <h:outputText value="#{client.dateRegistered}">
                                           <f:converter converterId="localDateTimeConverter" />
                                           <f:attribute name="pattern" value="#{navigationHelper.dateTimePattern}" />
                                       </h:outputText>
                                   </span>
                               </div>

                               <!-- LAST LOGIN DATE -->
                               <div class="col-2 d-flex align-items-center" role="gridcell">
                                   <span class="admin__table-last-login">
                                       <h:outputText value="#{client.dateLastAccess}">
                                           <f:converter converterId="localDateTimeConverter" />
                                           <f:attribute name="pattern" value="#{navigationHelper.dateTimePattern}" />
                                       </h:outputText>
                                   </span>
                               </div>

                           </div>
                       </ui:repeat>
                   </div>
               </div>
           
		</div>
    </ui:define>
</ui:composition>
