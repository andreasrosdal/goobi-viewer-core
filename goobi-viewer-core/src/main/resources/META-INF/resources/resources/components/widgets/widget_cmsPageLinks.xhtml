<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

	<composite:interface>
			<composite:attribute name="widget" type="io.goobi.viewer.model.cms.CMSSidebarElement" required="true" />
	</composite:interface>

    <composite:implementation>
        <h:panelGroup class="cms-page-links" rendered="#{cc.attrs.widget != null and cc.attrs.widget.type == 'widgetCmsPageLinks'}">
    	   <h:form id="customDrillDownForm" prependId="false">
				<div id="widgetCmsPageLinks-#{cc.attrs.widget.order}" class="widget #{cc.attrs.widget.cssClass}">
					<h:panelGroup rendered="#{cc.attrs.widget.widgetMode == 'STANDARD'}">
						<ui:fragment rendered="#{cc.attrs.widget.hasWidgetTitle}">
							<h2 >#{msg[cc.attrs.widget.widgetTitle]}</h2>
						</ui:fragment>

						<ul>
							<ui:repeat value="#{cc.attrs.widget.linkedPages.pages}" var="pageId">
								<li class="#{cmsBean.currentPage.id != null and cmsBean.currentPage.id.toString().equals(pageId) ? 'active': ''}">
									<a href="#{cmsBean.getPageUrl(pageId)}">
										#{cmsBean.getPage(pageId).menuTitle}
									</a>
								</li>
							</ui:repeat>
						</ul>
					</h:panelGroup>
					<h:panelGroup rendered="#{cc.attrs.widget.widgetMode == 'FOLDOUT'}">
						<h2 >
							<ui:fragment rendered="#{cc.attrs.widget.hasWidgetTitle}">
								#{msg[cc.attrs.widget.widgetTitle]}
							</ui:fragment>
							<ui:fragment rendered="#{!cc.attrs.widget.hasWidgetTitle}">						
								#{msg[cc.attrs.widget.type]}
							</ui:fragment>
                            <a href="#customCollapse-#{cc.attrs.widget.order}" data-toggle="collapse" aria-expanded="false" aria-controls="customCollapse">
                                #{msg[cc.attrs.widget.type]}
                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                            </a>
                        </h2>

						<ul>
							<ui:repeat value="#{cc.attrs.widget.linkedPages}" var="pageId">
								<li class="#{cmsBean.currentPage.id != null and cmsBean.currentPage.id.equals(pageId)}">
									<a href="">
										#{msg[pageId]}
									</a>
								</li>
							</ui:repeat>
						</ul>
						<div id="customCollapse-#{cc.attrs.widget.order}" class="collapse">
							<h:outputText escape="false" value="#{cc.attrs.widget.html}"></h:outputText>
						</div>
					</h:panelGroup>
				</div>
            </h:form>
        </h:panelGroup>
    </composite:implementation>
</ui:composition>
