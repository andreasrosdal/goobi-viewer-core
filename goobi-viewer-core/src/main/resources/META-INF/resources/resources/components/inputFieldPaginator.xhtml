<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

	<composite:interface>
		<composite:attribute name="itemCount" required="true" type="java.lang.Integer" />
		<composite:attribute name="itemActive" required="true" type="java.lang.Integer" />
		<composite:attribute name="firstItem" required="false" type="java.lang.Integer" default="1"/>
		<composite:attribute name="lastItem" required="false" type="java.lang.Integer" default="#{cc.attrs.itemCount}"/>
		<composite:attribute name="urlPrefix" required="true" />
		<composite:attribute name="urlSuffix" required="false" />
		<composite:attribute name="rtl" required="false" default="false" />
		<composite:attribute name="positionBottom" required="false" default="false" />
		<composite:attribute name="classSuffix" required="false" default="" />
	</composite:interface>

	<composite:implementation>
	    <h:panelGroup rendered="#{cc.attrs.itemCount > 1}"
	        styleClass="#{cc.attrs.rtl ? 'numeric-paginator -rtl' : 'numeric-paginator -ltr'} #{cc.attrs.classSuffix}"
	        layout="block" id="#{cc.clientId}">
	        <nav aria-label="#{cc.attrs.positionBottom ? msg.aria_label__pagination_bottom : msg.aria_label__pagination_pages}">
	            <ul>
	            	<!-- FIRST ITEM -->
                    <li class="numeric-paginator__navigate navigate_first #{cc.attrs.itemActive == cc.attrs.firstItem ? 'inactive' : ''}">
                        <a onclick="if(#{cc.attrs.itemActive == cc.attrs.firstItem}){return false;}" href="#{cc.attrs.urlPrefix}#{cc.attrs.firstItem}/#{cc.attrs.urlSuffix}">
							<ui:fragment rendered="#{!activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_first}" aria-hidden="true"></i>
                            </ui:fragment>
                            <ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_last}" aria-hidden="true"></i>
                            </ui:fragment>
						</a>
                    </li>
	                <!-- PREVIOUS ITEM -->
                    <li class="numeric-paginator__navigate navigate_prev #{cc.attrs.itemActive == cc.attrs.firstItem ? 'inactive' : ''}">
                        <a onclick="if(#{cc.attrs.itemActive == cc.attrs.firstItem}){return false;}" href="#{cc.attrs.urlPrefix}#{cc.attrs.itemActive - 1}/#{cc.attrs.urlSuffix}" aria-label="#{msg.aria_label__pagination_previous}">
                            <ui:fragment rendered="#{!activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_prev}" aria-hidden="true"></i>
                            </ui:fragment>
                            <ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_next}" aria-hidden="true"></i>
                            </ui:fragment>
                        </a>
                    </li>
	
					<li class="numeric-paginator__navigate navigate_text">
						<div class="page-number__label" onclick="viewerJS.paginator.showPageNumberInput(event)" data-paginator="label">
							<span>#{cc.attrs.itemActive}</span><span> #{msg.of} </span><span>#{cc.attrs.lastItem}</span>
						</div>
						<div class="page-number__input" data-paginator="input">
							<input data-input="number" onfocusout="viewerJS.paginator.showPageNumberLabel(event)" onchange="viewerJS.paginator.changePageNumber(event)" data-paginator="input-field"></input>
						</div>
					</li>
	                
	                <!-- NEXT ITEM -->
                    <li class="numeric-paginator__navigate navigate_next #{cc.attrs.itemActive == cc.attrs.lastItem ? 'inactive' : ''}">
                        <a onclick="if(#{cc.attrs.itemActive == cc.attrs.lastItem}){return false;}" href="#{cc.attrs.urlPrefix}#{cc.attrs.itemActive + 1}/#{cc.attrs.urlSuffix}" aria-label="#{msg.aria_label__pagination_next}">
                            <ui:fragment rendered="#{!activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_next}" aria-hidden="true"></i>
                            </ui:fragment>
                            <ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.rtl}">
                                <i class="fa #{msg.numericPaginator_prev}" aria-hidden="true"></i>
                            </ui:fragment>
                        </a>
                    </li>
	                <!-- LAST ITEM -->
                    <li class="numeric-paginator__navigate navigate_last #{cc.attrs.itemActive == cc.attrs.lastItem ? 'inactive' : ''}">
                        <a onclick="if(#{cc.attrs.itemActive == cc.attrs.lastItem}){return false;}" href="#{cc.attrs.urlPrefix}#{cc.attrs.lastItem}/#{cc.attrs.urlSuffix}">
                         <ui:fragment rendered="#{!activeDocumentBean.viewManager.topDocument.rtl}">
                             <i class="fa #{msg.numericPaginator_last}" aria-hidden="true"></i>
                         </ui:fragment>
                         <ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.rtl}">
                             <i class="fa #{msg.numericPaginator_first}" aria-hidden="true"></i>
                         </ui:fragment>
                        </a>
                    </li>
	            </ul>
	        </nav>
	        
	        
	        <script type="text/javascript">
	        //Initialize keyboard shortcuts
			// RUN FUNCTION ONLY ONCE
	       	if (typeof doClick === 'function') {
	       			// console.log('already defined - do nothing');
	       		} else {
	       			// console.log('not already defined');
	               	var paginatorConfig = {
	               	        previous: () => doClick(".numeric-paginator__navigate.navigate_prev a"),
	               	        next: () => doClick(".numeric-paginator__navigate.navigate_next a"),
	               	        first: () => doClick(".numeric-paginator .navigate_first a"),
	               	        last: () => doClick(".numeric-paginator .navigate_last a"),
	               	        rightToLeft: "#{activeDocumentBean.viewManager.topDocument.rtl}",
	               	        firstItem: #{cc.attrs.firstItem},
	               	        lastItem: #{cc.attrs.lastItem},
	               	        currentItem: #{cc.attrs.itemActive},
	               	        targetUrlPrefix: "#{cc.attrs.urlPrefix}",
	               	        targetUrlSuffix: "/#{cc.attrs.urlSuffix}",
	               	}
	               	function doClick(selector) {
	               	    let query = $(selector);
	               	    if(query.length) {
	               	        query.get(0).click();
	               	    }
	               	}
	               	viewerJS.paginator.init(paginatorConfig);
	       		}
	        </script>
		</h:panelGroup>
	</composite:implementation>
</ui:composition>