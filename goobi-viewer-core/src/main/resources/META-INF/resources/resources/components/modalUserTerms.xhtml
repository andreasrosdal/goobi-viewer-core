<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

	<composite:interface />

    <composite:implementation>
    
    <ui:fragment rendered="#{userBean.mustAgreeToTermsOfUse()}">

			<!-- Modal -->
			<div class="modal modal__user-terms" id="userTermsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
			  <div class="modal-dialog modal-dialog-centered" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h2 class="modal-title" id="exampleModalLongTitle">#{termsOfUseBean.title}</h2>
<!-- 			        <button type="button" class="fancy-close" data-dismiss="modal" aria-label="Close"> -->
<!-- 			          <span aria-hidden="true">x</span> -->
<!-- 			        </button> -->
			      </div>
			      <div class="modal-body">
					<div class="modal__user-terms-text">
	                    <h:outputText value="#{termsOfUseBean.description}" escape="false" />
	                </div>
			  <h:form id="termsForm" styleClass="form-horizontal" prependId="false">
			  <div id="terms" class="terms-modal">              


              </div>
              
                <!-- ACTION -->
				<div class="modal__user-terms-actions">
					<div class="form-group form-row modal__user-terms-first-click">
						<div class="col-sm-12 d-flex justify-content-end">
						    <button class="btn btn--danger mr-3 modal__user-terms-decline">#{msg.reject}</button>
	                        <h:commandButton styleClass="btn btn--success accept" value="#{msg.agree}" action="#{userBean.agreeToTermsOfUse()}">
	                        	<f:ajax execute="@this"/>
	                        	<f:passThroughAttribute name="data-dismiss" value="modal"></f:passThroughAttribute>
	                        </h:commandButton>
						</div>
					</div>
					<div class="modal__user-terms-second-click">
						<p>#{msg.AreYouSureAboutDelete}</p>
						<button class="btn btn--default mr-3 modal__user-terms-back-button">#{msg.Nope}</button>
						<h:commandButton styleClass="btn btn--danger mr-2 decline" value="#{msg.iAmSure}" action="#{userBean.rejectTermsOfUse()}"/>
					</div>
				</div>

			</h:form>

			      </div>
			    </div>
			  </div>
			</div>
	<script>
	    $(window).on('load',function(){
	        $('#userTermsModal').modal({
	        	backdrop:"static",
	        	keyboard:false}).modal("show");
	    });
	    $('.modal__user-terms-decline').click(
	    		 function(event) {
	    	event.preventDefault();
	    	$('.modal__user-terms-first-click, .modal__user-terms-text').hide();
	    	$('.modal__user-terms-second-click').fadeIn('fast');
	    		  }
	    );
	    $('.modal__user-terms-back-button').click(
	    		 function(event) {
	    	event.preventDefault();
	    	$('.modal__user-terms-first-click, .modal__user-terms-text').fadeIn('fast');
	    	$('.modal__user-terms-second-click').hide();
	    		  }
	    );
	    
	</script>
</ui:fragment>

	</composite:implementation>
</ui:composition>
