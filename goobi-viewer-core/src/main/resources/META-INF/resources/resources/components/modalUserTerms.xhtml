<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite">

	<composite:interface />

    <composite:implementation>
    
    <ui:fragment rendered="#{userBean.mustAgreeToTermsOfUse()}">

			<!-- Modal -->
			<div class="modal user-terms-modal" id="userTermsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h2 class="modal-title" id="exampleModalLongTitle">#{termsOfUseBean.title}</h2>
<!-- 			        <button type="button" class="fancy-close" data-dismiss="modal" aria-label="Close"> -->
<!-- 			          <span aria-hidden="true">x</span> -->
<!-- 			        </button> -->
			      </div>
			      <div class="modal-body">
					
					<p>
	                    <h:outputText value="#{termsOfUseBean.description}" escape="false" />
	                </p>

			  <h:form id="termsForm" styleClass="form-horizontal" prependId="false">
			  <div id="terms" class="terms-modal">              


              </div>
              
                <!-- ACTION -->
				<div class="form-group form-row">
					<div class="col-sm-12 d-flex justify-content-end">
                        <h:commandButton styleClass="btn btn--danger decline" value="#{msg.reject}" action="#{userBean.rejectTermsOfUse()}"/>
                        <h:commandButton  styleClass="btn btn--success accept" value="#{msg.agree}" action="#{userBean.agreeToTermsOfUse()}">
                        	<f:ajax execute="@this"/>
                        	<f:passThroughAttribute name="data-dismiss" value="modal"></f:passThroughAttribute>
                        </h:commandButton>
					</div>
				</div>
				
			</h:form>

			      </div>
			    </div>
			  </div>
			</div>

	<script>
		$("#userTermsModal").modal({backdrop:"static", keyboard:false}).modal("show");
	</script>
	
</ui:fragment>

	</composite:implementation>
</ui:composition>
