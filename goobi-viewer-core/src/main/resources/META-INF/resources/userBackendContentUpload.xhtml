<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
	template="/resources/themes/#{navigationHelper.theme}/template.html">

	<ui:define name="metadata">
		<f:metadata>
			<f:event type="preRenderView" listener="#{navigationHelper.setCurrentPage('userContentUpload', false, true)}" />
			<f:event type="preRenderView"
				listener="#{breadcrumbBean.addStaticLinkToBreadcrumb(msg.admin__user_profile, request.contextPath.concat('/user/'), 1)}" />
			<f:event type="preRenderView" listener="#{navigationHelper.addStaticLinkToBreadcrumb(msg.userContentUpload, 2)}" />
		</f:metadata>
	</ui:define>

    <ui:define name="content">
        <ui:fragment rendered="#{userBean.loggedIn and configurationBean.contentUploadEnabled}">
		    <div id="userContentUploadWrap" class="page-wrapp">
				<h1>#{msg.user__upload_content}</h1>

				<div id="userContentUpload" class="user-comments">
					<h:form id="userUploadJobsForm" prependId="false">

							<div class="admin__table-tools flex-wrap">
								<!-- PAGINATOR -->
								<div class="admin__table-paginator">
									<viewerComponent:dataTablePaginator tableValues="#{uploadBean.lazyModelUploadJobs}" />
								</div>
							</div>


							<!-- ALL USER UPLOAD JOBS TABLE -->
							<div id="userUploadJobsTable" class="user-comments__table" role="grid" aria-label="#{msg.userComments}">

								<!-- TITLE ROW -->
								<div class="user-comments__table-title" role="row">
								
                                    <!-- DATE COL -->
                                    <div class="user-comments__table-title-date" role="presentation">
                                        <viewerComponent:sortingArrow filterType="dateCreated"
                                            colHeading="#{msg.date}"
                                            list="#{uploadBean.lazyModelUploadJobs}" />
                                    </div>
								
									<!-- TARGET COL -->
									<div class="user-comments__table-title-target" role="presentation">
										<viewerComponent:sortingArrow filterType="targetPI_targetPageOrder"
											colHeading="#{msg.record}"
											list="#{uploadBean.lazyModelUploadJobs}" />
									</div>

									<!-- TEXT COL -->
									<div class="user-comments__table-title-comment" role="presentation">
										<viewerComponent:sortingArrow filterType="body"
											colHeading="#{msg.Comment}"
											list="#{uploadBean.lazyModelUploadJobs}" />
									</div>


								</div>

								<div class="user-comments__table-body" role="presentation">

									<!-- INDIVIDUAL JOB ROWS -->
									<ui:repeat var="job" value="#{uploadBean.lazyModelUploadJobs.paginatorList}">
										<div class="user-comments__table-entry" role="row">
                                            <!-- DATE -->
                                            <div class="user-comments__table-entry-date" role="cell">
                                                <h:outputText value="#{job.dateCreated}">
                                                    <f:converter converterId="localDateTimeConverter" />
                                                    <f:attribute name="pattern"
                                                        value="#{navigationHelper.dateTimePattern}" />
                                                </h:outputText>
                                            </div>
											<!-- TITLE -->
											<div class="user-comments__table-entry-label" role="cell">
												<h:outputText value="#{job.title}" />	
											</div>

											<!-- STATUS -->
											<div class="user-comments__table-entry-text" role="cell">
												<ui:fragment rendered="#{job.status eq 'WAITING'}">
												    TODO (W)
												</ui:fragment>
                                                <ui:fragment rendered="#{job.status eq 'READY'}">
                                                    TODO (X)
                                                </ui:fragment>
                                                <ui:fragment rendered="#{job.status eq 'ERROR'}">
                                                    TODO (V)
                                                </ui:fragment>
											</div>
										</div>
									</ui:repeat>
								</div>
							</div>

					 </h:form>
			    </div>
            </div>
            
        </ui:fragment>

	</ui:define>

	<ui:define name="sidebar">
	    <ui:fragment rendered="#{userBean.loggedIn and configurationBean.contentUploadEnabled}">
            <div class="admin__content-side -sticky">
                <div class="admin__default-block">
                    <div id="widgetSidebar" class="widget">
                        <h:form id="widgetSidebarForm">
                            <h2>#{msg.user__upload_content__sidebar_label}</h2>
                            <h:outputText value="#{msg.user__upload_content__sidebar_desc}" />
                            <button class="btn btn--icon" data-toggle="modal" data-target="#contentUploadModal">#{msg.user__upload_content}</button>
                        </h:form>
                    </div>
                </div>
            </div>
        </ui:fragment>
	</ui:define>
	

</ui:composition>
