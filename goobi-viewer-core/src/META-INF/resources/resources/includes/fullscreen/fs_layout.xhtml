<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html" 
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:jsf="http://xmlns.jcp.org/jsf" 
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:viewer="http://xmlns.jcp.org/jsf/composite/components/partner" 
    xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
    xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets">

    <!-- VIEW -->
    <div id="fullscreenView" class="fullscreen__view">
        <!-- SIDEBAR PANEL CONTROLS -->
        <div id="fullscreenSidebarPanelControls" class="fullscreen__view-sidebar-panel-controls">
            <button class="btn btn--clean" data-close="all-tabs"></button>
            <button class="btn btn--clean" data-open="all-tabs"></button>
        </div>
        
        <!-- SIDEBAR -->
        <aside id="fullscreenViewSidebar" class="fullscreen__view-sidebar">        
            <div class="fullscreen__view-sidebar-inner">            
                <!-- SIDEBAR CONTROLS -->
                <div class="fullscreen__view-sidebar-controls">
                    <button
                    	type="button" 
                    	class="btn btn--clean" 
                    	title="#{msg.fullscreen_hideSidebar}" 
                    	data-close="fs-sidebar" 
                    	data-toggle="tooltip" 
                    	data-placement="right">
                    </button>
                </div>
                
                <!-- SIDEBAR WORK TITLE -->
                <div class="fullscreen__view-sidebar-work-title">
                    <h2>#{activeDocumentBean.titleBarLabel}</h2>
                </div>

                <!-- FULLSCREEN SIGNAL -->
				<div class="fullscreen__view-sidebar-signal">
					<!-- COPY SIGN -->
					<div class="fullscreen__view-sidebar-copy-sign">
						<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONDZ') == ''}">
							<img
								src="#{request.contextPath}/resources/images/fullscreen_copy-sign/copy-sign_neutral.png"
								alt="neutral title sign" />
						</ui:fragment>
						<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONDZ') == 'Freier Zugang'}">
							<img
								src="#{request.contextPath}/resources/images/fullscreen_copy-sign/copy-sign_green.png"
								alt="free access title sign" 
								data-toggle="popover"
								data-trigger="hover" 
								data-placement="top" 
								data-container="body"
								data-content="#{msg.copy_sign__free_access}" />
						</ui:fragment>
						<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONDZ') == 'Eingeschränkter Zugang'}">
							<img
								src="#{request.contextPath}/resources/images/fullscreen_copy-sign/copy-sign_yellow.png"
								alt="restricted access title sign" 
								data-toggle="popover"
								data-trigger="hover" 
								data-placement="top" 
								data-container="body"
								data-content="#{msg.copy_sign__limited_access}" />
						</ui:fragment>
						<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONDZ') == 'Kein Zugang'}">
							<img
								src="#{request.contextPath}/resources/images/fullscreen_copy-sign/copy-sign_red.png"
								alt="no access title sign" 
								data-toggle="popover"
								data-trigger="hover" 
								data-placement="top" 
								data-container="body"
								data-content="#{msg.copy_sign__no_access}" />
						</ui:fragment>
					</div>
					
					<!-- COPY INFO -->					
					<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') != null}">
						<div class="fullscreen__view-sidebar-copy-info">
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'Rights reserved'}">
								<a
									data-content="#{msg.cc_right__no_license_assigned}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-html="true" 
									data-container="body" 
									role="button"
									tabindex="0"> 
									<img
										src="#{request.contextPath}/resources/images/cc-icons/urhg_logo.png"
										alt="rights reserved icon" />
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'Rights reserved - Rights managed by VG Wort (§ 51 VGG)'}">
								<a
									data-content="#{msg.cc_right__rights_reserved}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-html="true" 
									data-container="body" 
									role="button"
									tabindex="0"> 
									<img
										src="#{request.contextPath}/resources/images/cc-icons/urhg_logo.png"
										alt="rights reserved icon" />
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'Public Domain'}">
								<a
									data-content="#{msg.cc_right__p}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">p</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY-SA'}">
								<a
									data-content="#{msg.cc_right__cba}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">cba</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY-SA-NC'}">
								<a
									data-content="#{msg.cc_right__cban}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">cban</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY'}">
								<a
									data-content="#{msg.cc_right__cb}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" role="button"
									tabindex="0"> 
									<span class="cc-icons">cb</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY-NC-ND'}">
								<a
									data-content="#{msg.cc_right__cbnd}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">cbnd</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY-NC'}">
								<a
									data-content="#{msg.cc_right__cbn}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">cbn</span>
								</a>
							</ui:fragment>
							<ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.getMetadataValue('MD_ACCESSCONDITIONCOPYRIGHT') == 'CC BY-ND'}">
								<a
									data-content="#{msg.cc_right__cbd}"
									data-placement="top" 
									data-toggle="popover" 
									data-trigger="click"
									data-container="body" 
									data-html="true" 
									role="button"
									tabindex="0"> 
									<span class="cc-icons">cbd</span>
								</a>
							</ui:fragment>
						</div>
					</ui:fragment>

					<!-- SOCIAL MEDIA -->
					<div class="fullscreen__view-sidebar-social-media">
						<ul>
							<li>
								<a
									href="http://facebook.com/sharer.php?u=#{navigationHelper.encodedUrl}&amp;t=#{request.contextPath}"
									title="#{msg.social__share_on_facebook}"
									data-toggle="tooltip"
									data-placement="top" 
									target="_blank"
									rel="noopener"
									role="button">
									<i class="fa fa-facebook-official" aria-hidden="true"></i>
								</a>
							</li>
							<li>
								<a
									href="http://twitter.com/home?status=#{navigationHelper.encodedUrl}"
									title="#{msg.social__share_on_twitter}"
									data-toggle="tooltip"
									data-placement="top" 
									target="_blank"
									rel="noopener"
									role="button"> 
									<i class="fa fa-twitter" aria-hidden="true"></i>
								</a>
							</li>
						</ul>
					</div>
				</div>
                
                <!-- SIDEBAR ACCORDEON -->
                <div class="fullscreen__view-sidebar-accordeon">
                    <!-- METADATA -->
                    <div id="panel-1" class="fullscreen__view-sidebar-accordeon-panel fs-metadata">
                        <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
                            <span>#{msg.sidebarBibData}</span>
                        </h3>
                        
                        <div class="fullscreen__view-sidebar-accordeon-panel-body">
                            <ui:include src="/resources/includes/metadata/metadata.xhtml" />
                        </div>
                    </div>

                    <!-- TOC -->
                    <ui:fragment rendered="#{activeDocumentBean.toc.hasChildren()}">
                        <div id="panel-2" class="fullscreen__view-sidebar-accordeon-panel fs-toc">
                            <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
                                <span>#{msg.sidebarTocAnchor}</span>
                            </h3>
                            
                            <div class="fullscreen__view-sidebar-accordeon-panel-body">
                                <widgetComponent:widget_toc />
                            </div>
                        </div>
                    </ui:fragment>
                    
                    <!-- FULLTEXT -->
                    <ui:fragment rendered="#{activeDocumentBean.viewManager.topDocument.fulltextAvailable}">
                        <div id="panel-3" class="fullscreen__view-sidebar-accordeon-panel fs-fulltext">
                            <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
                                <span>#{msg.fulltext}</span>
                            </h3>
    
                            <div class="fullscreen__view-sidebar-accordeon-panel-body">
                                <ui:include src="/resources/includes/object/fulltext.xhtml" />
                            </div>
                        </div>
                    </ui:fragment>

                    <!-- DOWNLOADS -->
                    <div id="panel-4" class="fullscreen__view-sidebar-accordeon-panel fs-downloads">
                        <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
                            <span>#{msg.widgetUsage}</span>
                        </h3>

                        <div class="fullscreen__view-sidebar-accordeon-panel-body">
                            <widgetComponent:widget_usage />
                        </div>
                    </div>

                    <!-- SEARCH HIT NAVIGATION -->
                    <ui:fragment rendered="#{searchBean.hitsCount > 1 and activeDocumentBean.prevHit != null}">
                        <div id="panel-5" class="fullscreen__view-sidebar-accordeon-panel fs-search-hit-navigation">
                            <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
                                <span>#{msg.searchHitNavigation}</span>
                            </h3>
                            
                            <div class="fullscreen__view-sidebar-accordeon-panel-body">
                                <widgetComponent:widget_searchResultNavigation />
                            </div>
                        </div>                    
                    </ui:fragment>
                    
                    <!-- SEARCH IN CURRENT ITEM -->
                    <ui:fragment rendered="#{!activeDocumentBean.anchor and configurationBean.showSearchInItem}">
	                    <div id="panel-6" class="fullscreen__view-sidebar-accordeon-panel fs-search-in-current-item">
	                        <h3 class="fullscreen__view-sidebar-accordeon-panel-title">
	                            <span>#{msg.search}</span>
	                        </h3>
	                        
	                        <div class="fullscreen__view-sidebar-accordeon-panel-body">
	                            <widgetComponent:widget_searchInCurrentItem />
	                        </div>
	                    </div>
                    </ui:fragment>
                </div>
            </div>
        </aside>
        
        <!-- FULLSCREEN HEADER -->
        <ui:include src="/resources/includes/fullscreen/fs_header.xhtml" />

        <!-- IMAGE -->
        <section id="fullscreenViewImage" class="fullscreen__view-image">
            <div class="fullscreen__view-image-inner">
                <!-- VIEW IMAGE -->
                <ui:fragment rendered="#{activeDocumentBean.viewManager.currentPage.mimeType == 'image'}">
                    <ui:include src="/resources/includes/object/image.xhtml" />                   
                </ui:fragment>
                
                <!-- VIEW VIDEO -->
                <h:panelGroup rendered="#{activeDocumentBean.viewManager.currentPage.mimeType == 'video'}">
                    <ui:insert name="viewVideo">
                        <ui:include src="/resources/includes/object/video.xhtml" />        
                    </ui:insert>                    
                </h:panelGroup>

                <!-- VIEW AUDIO -->
                <h:panelGroup rendered="#{activeDocumentBean.viewManager.currentPage.mimeType == 'audio'}">
                    <ui:insert name="viewAudio">
                        <ui:include src="/resources/includes/object/audio.xhtml" />        
                    </ui:insert>                    
                </h:panelGroup>
                
                <!-- VIEW 3D OBJECT -->
                <h:panelGroup rendered="#{activeDocumentBean.viewManager.currentPage.mimeType == 'object'}">
                    <ui:insert name="viewObject3d">
                        <ui:include src="/resources/includes/object/object3d.xhtml" />        
                    </ui:insert>                    
                </h:panelGroup>
                
                <!-- THUMBNAILS -->
                <div class="fullscreen__view-image-thumbs-wrapper">
                    <fsThumbnails></fsThumbnails>
                </div>
                
                <!-- OPEN SIDEBAR -->
                <div id="viewSidebarOpen" class="fullscreen__view-sidebar-open">
                    <button class="btn btn--clean" data-open="fs-sidebar">
                        <span>#{msg.fullscreen_openSidebar}</span>
                    </button>                    
                </div>
                
            </div>
        </section>
    </div>
</ui:composition>