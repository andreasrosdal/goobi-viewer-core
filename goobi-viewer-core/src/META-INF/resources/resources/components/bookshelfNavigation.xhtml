<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite"
      xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components" 
      xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
      xmlns:templateComponent="http://xmlns.jcp.org/jsf/composite/themes/gaugsammlungen/components">

    <!-- INTERFACE OPTIONS -->
    <composite:interface />

    <!-- COMPONENT CONTENT -->
    <composite:implementation>
        <ui:fragment rendered="#{configurationBean.bookshelvesEnabled}">
            <!-- BOOKSHELF NAVIGATION -->
            <div class="bookshelf-navigation">
                <!-- BOOKSHELF NAVIGATION DROPDOWN WRAPPER -->
                <div class="bookshelf-navigation__dropdown-wrapper">
                    <!-- BOOKSHELF NAVIGATION TOGGLE DROPDOWN -->
                    <button type="button" class="btn btn--clean" data-bookshelf-type="dropdown">
                        <!-- BOOKSHELF NAVIGATION STRING -->
                        <span class="bookshelf-navigation__string">#{msg.bookmarkList}</span>

                        <!-- BOOKSHELF NAVIGATION COUNTER -->
                        <ui:fragment rendered="#{!userBean.loggedIn}">
                            <span class="bookshelf-navigation__counter" data-bookshelf-type="counter" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="#{msg.wl_watchListItems}"></span>
                        </ui:fragment>
                        <ui:fragment rendered="#{userBean.loggedIn}">
                            <span class="bookshelf-navigation__counter" data-bookshelf-type="counter" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="#{msg.wl_allWatchListItems}"></span>
                        </ui:fragment>
                    </button>

                    <!-- BOOKSHELF NAVIGATION DROPDOWN -->
                    <div class="bookshelf-navigation__dropdown">
                        <!-- BOOKSHELF NAVIGATION DROPDOWN LIST -->
                        <div class="bookshelf-navigation__dropdown-list"></div>

                        <!-- BOOKSHELF NAVIGATION DROPDOWN LIST ACTIONS -->
                        <ui:fragment rendered="#{!userBean.loggedIn}">
                            <div class="bookshelf-navigation__dropdown-list-actions">
                                <!-- BOOKSHELF NAVIGATION DROPDOWN LIST RESET -->
                                <div class="bookshelf-navigation__dropdown-list-reset"></div>
                                
                                <!-- BOOKSHELF NAVIGATION DROPDOWN LIST SEND -->
                                <div class="bookshelf-navigation__dropdown-list-send">
                                    <a href="#{request.contextPath}/userBookshelfSendList/">
                                        <span>#{msg.bookmarkList_session_mail_sendList}</span>
                                        <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                                    </a>
                                </div>
                                
                                <!-- BOOKSHELF NAVIGATION DROPDOWN LIST SEND -->
                                <div class="bookshelf-navigation__dropdown-list-search">
                                    <h:form>
                                    	<h:commandLink action="pretty:searchadvanced">
                                           <span>#{msg.action__search_in_bookshelf}</span>
                               			   <i class="fa fa-search" aria-hidden="true"></i>
                                           <f:setPropertyActionListener value="#{bookshelf.name}" 
                                               target="#{searchBean.advancedQueryGroups[0].queryItems[0].value}" />
                                           <f:setPropertyActionListener value="BOOKSHELF" target="#{searchBean.advancedQueryGroups[0].queryItems[0].field}" />
                                           <f:setPropertyActionListener value="IS" target="#{searchBean.advancedQueryGroups[0].queryItems[0].operator}" />
                                           <f:passThroughAttribute name="data-toggle" value="tooltip" />
                                           <f:passThroughAttribute name="data-placement" value="top" />
                                       </h:commandLink>   
                                    </h:form>

                                </div>
                                
                                <!-- TODO: Link nur rendern, wenn auch Objekte in der Liste sind (/rest/session/count > 1) -->
                                <!-- TODO: Dem Link die notwendigen Infos mitgeben, damit Mirador die richtigen Objekte anzeigt. -->
                                
                                <!-- BOOKSHELF NAVIGATION DROPDOWN LIST MIRADOR -->
                                <div class="bookshelf-navigation__dropdown-list-mirador">
                                    <a href="#{request.contextPath}/mirador/" target="_blank">
                                        <span>#{msg.bookmarkList_openMirador}</span>
                                        <i class="fa fa-th" aria-hidden="true"></i>
                                    </a>
                                </div>
                            </div>
                        </ui:fragment>
                    </div>
                </div>
            </div>
        </ui:fragment>
    </composite:implementation>
</ui:composition>
