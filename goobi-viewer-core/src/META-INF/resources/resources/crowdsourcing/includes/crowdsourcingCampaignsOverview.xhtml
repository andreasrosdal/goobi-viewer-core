<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components">

    <!-- INPUT MODULE TEMPLATE -->
    <div class="crowdsourcing-campaigns-overview">
    <h:form>
		<ui:repeat var="campaign" value="#{crowdsourcingBean.getAllCampaigns('PUBLIC')}">
			<div class="crowdsourcing-campaigns-overview__campaign">
				<ui:fragment rendered="#{campaign.hasMediaItem()}">
					<div class="crowdsourcing-campaigns-overview__campaign__image">
						<img src="#{campaign.mediaItem.iconURI}" />
					</div>
				</ui:fragment>
				<div class="crowdsourcing-campaigns-overview__campaign__text">
					<h3 class="crowdsourcing-campaigns-overview__campaign__text__title">#{campaign.title}</h3>
					<div class="crowdsourcing-campaigns-overview__campaign__text__description">
						#{campaign.description}
					</div>
				</div>
				<div class="crowdsourcing-campaigns-overview__campaign__actions">
					<h:commandLink action="#{crowdsourcingBean.forwardToCrowdsourcingAnnotation(campaign)}" styleClass="btn btn--default">#{msg.action__crowdsourcing_participate}</h:commandLink>
					<h:commandLink action="#{crowdsourcingBean.forwardToCrowdsourcingReview(campaign)}" styleClass="btn btn--default">#{msg.action__crowdsourcing_review}</h:commandLink>
				</div>
				<div class="crowdsourcing-campaigns-overview__campaign__statistics">
					<div class="crowdsourcing-campaigns-overview__campaign__statistics__text">
						<dl>
							<dt>#{msg.label__progress}</dt>
							<dd>#{campaign.progress}%</dd>
						</dl>
						<dl>
							<dt>#{msg.label__total_items}</dt>
							<dd>#{campaign.numRecords}</dd>
						</dl>
						<dl>
							<dt>#{msg.label__finished_items}</dt>
							<dd>#{campaign.getNumRecordsForStatus('FINISHED')}</dd>
						</dl>
						<dl>
							<dt>#{msg.label__items_in_review}</dt>
							<dd>#{campaign.getNumRecordsForStatus('REVIEW')}</dd>
						</dl>
						<dl>
							<dt>#{msg.label__days_left}</dt>
							<dd>#{campaign.daysLeftAsString}</dd>
						</dl>
					</div>
					<div class="crowdsourcing-campaigns-overview__campaign__statistics__bar">
						<progressBar total="#{campaign.numRecords}" 
							values="[#{campaign.getNumRecordsForStatus('FINISHED')}, #{campaign.getNumRecordsForStatus('REVIEW')}]" 
							colors='["green", "yellow"]'></progressBar>
					</div>
				</div>
			</div>
		</ui:repeat>
	</h:form>
	<script>
		riot.mount("progressBar");
	</script>
    </div>
</ui:composition>